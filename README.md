# Windows Python 2D Game Bot Dev Plugin

Claude Code plugin for developing Windows Python 2D game automation bots. Provides a structured 7-phase development workflow, 5 specialized agents, and deep domain knowledge for command books, CV detection, input simulation, screen capture, movement systems, and API/MCP dev bridge integration.

## Installation

```
/plugin marketplace add dyeoh/claude-plugin-windows-python-2d-game-bot-dev
/plugin install 2dgamebotwindows@dyeoh-claude-plugin-windows-python-2d-game-bot-dev
```

## Usage

```
/2dgamebotwindows add a new buff skill for bishop
/2dgamebotwindows improve rune detection accuracy on dark maps
/2dgamebotwindows fix key release issue in flash jump attack
/2dgamebotwindows optimize velocity prediction for frame drops
```

## 7-Phase Workflow

| Phase | Name | What It Does |
|-------|------|-------------|
| 1 | **Cache** | Check `.gamebot-cache.md` for staleness via git commit hash. Rebuild if stale. |
| 2 | **Scope** | Classify into domains, identify affected files, determine risk level. |
| 3 | **Explore** | Launch agents to discover patterns and trace dependencies. |
| 4 | **Design** | Blueprint with domain-specific safety checklists. |
| 5 | **Implement** | Code following patterns with safety enforcement. |
| 6 | **Review** | Tiered audit: Safety > Correctness > Performance > Style. |
| 7 | **Commit** | Conventional commit format. |

## Agents

| Agent | Color | Purpose |
|-------|-------|---------|
| **bot-explorer** | Teal | Codebase discovery, cache building, pattern indexing |
| **skill-architect** | Orange | Command book design, state machines, timing, key management |
| **bot-reviewer** | Red | Safety-critical review (key release, bounded waits, frame safety) |
| **cv-detection** | Purple | Template matching, color filtering, rune solver, ROI optimization |
| **research-analyst** | Yellow | Deep algorithm research, VM analysis, control theory, frame drops |

## Skills (Domain Knowledge)

| File | Coverage |
|------|----------|
| `command-book-patterns.md` | 11 base classes, ACTION_TYPE system, hook methods, templates |
| `cv-detection-patterns.md` | Template matching pipeline, dHash, color filtering, sub-pixel |
| `input-key-management.md` | Key safety, Interception driver, mobbing keys, cursor, click verify |
| `screen-capture-optimization.md` | 3-tier backends, VM patches, adaptive FPS, frame management |
| `movement-pathfinding.md` | Move/Adjust, A* pathfinding, velocity prediction, rope climbing |

## Safety Enforcement

The plugin enforces safety-critical patterns for game bot development:

- Every `key_down()` must have `key_up()` in a `finally` block
- Every `while` loop must have a timeout condition
- Every `matchTemplate` must use an ROI (never full-frame)
- Every `Command` subclass must declare `ACTION_TYPE`
- Frame access must copy before multi-step processing

## Codebase Cache

`.gamebot-cache.md` is auto-generated by the bot-explorer agent and tracks:
- Command book registry (16 classes with skills, movement types, adjust overrides)
- Module registry (Bot, Capture, Listener, Notifier, RuneSolver)
- Action type usage across all command books
- Detection templates with thresholds and ROIs
- Game interface controllers with VALID_STATES
- Base command classes with config vars and hooks
- Timing constants and resource inventory

Cache invalidation is git-commit-based â€” if HEAD differs from the cached hash, the cache is rebuilt.

## Relationship to Existing Prompts

If your project has prompts in `.github/prompts/`, this plugin absorbs and extends them:

| Existing Prompt | Plugin Equivalent | Enhancements |
|----------------|-------------------|-------------|
| `skill-architect.prompt.md` | `agents/skill-architect.md` | Base class selection, ACTION_TYPE guidance, MovementConfig |
| `research-analyst.prompt.md` | `agents/research-analyst.md` | Web search, algorithm research, VM analysis |
| `code-simplifier.prompt.md` | `agents/bot-reviewer.md` (Tier 4) | Integrated into review workflow |

The existing prompts remain available for standalone use outside the plugin workflow.

## Supported Tech Stack

- Python 3.11+
- OpenCV (cv2) for computer vision
- numpy for array operations
- tkinter for GUI
- Interception driver for input simulation
- bettercam / windows-capture / mss for screen capture
- aiohttp for embedded API server
- MCP SDK + httpx for Claude Code bridge
